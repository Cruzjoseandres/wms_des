module.exports=[28239,a=>{"use strict";var b=a.i(87924),c=a.i(3130),d=a.i(40695),e=a.i(54161),f=a.i(88237),g=a.i(56486),h=a.i(11156),i=a.i(70106);let j=(0,i.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var k=a.i(24669),l=a.i(41675),m=a.i(84505),n=a.i(4720),o=a.i(16201),p=a.i(41710),q=a.i(72131),r=a.i(20226),s=a.i(62435);let t=(0,r.create)()((0,s.persist)((a,b)=>({payments:[],processPayment:async b=>{await new Promise(a=>setTimeout(a,1500));let c=Math.random()>.05,d={id:`payment_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...b,status:c?"completed":"failed",timestamp:new Date,transactionId:`TXN-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`};return a(a=>({payments:[d,...a.payments]})),d},getPaymentHistory:a=>{let{payments:c}=b();return a?c.filter(b=>b.invoiceId===a):c},clearPayments:()=>a({payments:[]})}),{name:"payment-simulator-storage"})),u={success:{freq:1200,duration:100,type:"sine"},error:{freq:300,duration:300,type:"square"},warning:{freq:600,duration:150,type:"triangle"},scan:{freq:1800,duration:50,type:"sine"}};var v=a.i(65733),w=a.i(92759);let x=(0,i.default)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var y=a.i(92e3);let z=(0,i.default)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);function A({isOpen:a,onClose:c,onProcessPayment:f,invoice:g}){let[i,j]=(0,q.useState)(null),[k,l]=(0,q.useState)(!1),[m,n]=(0,q.useState)(null);if(!g)return null;let p=[{id:"card",name:"Tarjeta de Crédito",icon:h.CreditCard,description:"Visa, Mastercard, Amex",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},{id:"transfer",name:"Transferencia Bancaria",icon:w.Send,description:"Depósito directo a cuenta",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},{id:"cash",name:"Efectivo",icon:x,description:"Pago en caja",color:"bg-green-500/20 text-green-400 border-green-500/30"}],r=async()=>{if(i){l(!0);try{await f(i),n({success:!0,transactionId:`TXN-${Date.now()}-${Math.random().toString(36).substr(2,9).toUpperCase()}`,message:"Pago procesado exitosamente"}),setTimeout(()=>{s()},3e3)}catch(a){n({success:!1,message:"Error al procesar el pago. Intente de nuevo."})}finally{l(!1)}}},s=()=>{j(null),l(!1),n(null),c()};return(0,b.jsx)(v.Dialog,{open:a,onOpenChange:s,children:(0,b.jsxs)(v.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(v.DialogHeader,{children:[(0,b.jsx)(v.DialogTitle,{children:"Procesar Pago"}),(0,b.jsxs)(v.DialogDescription,{children:["Seleccione un método de pago para la factura ",g.id]})]}),m?(0,b.jsx)("div",{className:"py-8 text-center space-y-3",children:m.success?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.CheckCircle,{className:"w-12 h-12 text-green-400 mx-auto"}),(0,b.jsx)("p",{className:"text-green-400 font-semibold",children:m.message}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ID: ",(0,b.jsx)("span",{className:"font-mono",children:m.transactionId})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y.AlertCircle,{className:"w-12 h-12 text-red-400 mx-auto"}),(0,b.jsx)("p",{className:"text-red-400 font-semibold",children:m.message})]})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"p-4 rounded-lg border border-border bg-muted/30",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Empresa"}),(0,b.jsx)("p",{className:"font-semibold",children:g.org})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Plan"}),(0,b.jsx)(e.Badge,{className:"bg-orange-500/20 text-orange-400",children:g.plan})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"Monto a Pagar"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-400",children:g.amount})]})]})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Seleccione método de pago:"}),(0,b.jsx)("div",{className:"grid gap-2",children:p.map(a=>{let c=a.icon;return(0,b.jsx)("button",{onClick:()=>j(a.id),className:`p-3 rounded-lg border-2 transition-all text-left ${i===a.id?`${a.color} border-current`:"border-border bg-muted/30 hover:bg-muted/50"}`,children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(c,{className:"w-5 h-5 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),(0,b.jsx)("p",{className:"text-xs opacity-75",children:a.description})]})]})},a.id)})})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:s,className:"flex-1 bg-transparent",children:"Cancelar"}),(0,b.jsx)(d.Button,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:r,disabled:!i||k,children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z,{className:"w-4 h-4 mr-2 animate-spin"}),"Procesando..."]}):"Procesar Pago"})]})]})]})})}let B=[{id:"INV-001",org:"Distribuidora Central",plan:"Enterprise",amount:"$499.00",date:"2025-01-01",status:"paid"},{id:"INV-002",org:"Logística Express",plan:"Pro",amount:"$99.00",date:"2025-01-01",status:"paid"},{id:"INV-003",org:"Almacenes del Sur",plan:"Pro",amount:"$99.00",date:"2025-01-01",status:"pending"},{id:"INV-004",org:"Importadora Global",plan:"Enterprise",amount:"$499.00",date:"2025-01-01",status:"paid"}];function C(){let{organizations:a}=(0,g.useAdminStore)(),{processPayment:i,payments:r}=function(){let a,b,c,d,e,f,{processPayment:g,getPaymentHistory:h,payments:i,clearPayments:j}=t(),{playSound:k}=(a=(0,q.useRef)(null),b=(0,q.useRef)(!0),(0,q.useEffect)(()=>()=>{a.current?.close()},[]),c=(0,q.useCallback)(c=>{if(!b.current||!a.current)return;let d=a.current,{freq:e,duration:f,type:g}=u[c],h=d.createOscillator(),i=d.createGain();h.connect(i),i.connect(d.destination),h.type=g,h.frequency.setValueAtTime(e,d.currentTime),i.gain.setValueAtTime(.3,d.currentTime),i.gain.exponentialRampToValueAtTime(.01,d.currentTime+f/1e3),h.start(d.currentTime),h.stop(d.currentTime+f/1e3)},[]),d=(0,q.useCallback)(()=>c("success"),[c]),e=(0,q.useCallback)(()=>c("error"),[c]),f=(0,q.useCallback)(()=>c("warning"),[c]),{playSuccess:d,playError:e,playWarning:f,playScan:(0,q.useCallback)(()=>c("scan"),[c]),setEnabled:(0,q.useCallback)(a=>{b.current=a},[])});return{processPayment:async a=>{try{k("loading");let b=await g(a);return"completed"===b.status?k("success"):k("error"),b}catch(a){return k("error"),console.error("[v0] Payment processing error:",a),null}},getPaymentHistory:h,payments:i,clearPayments:j}}(),[s,v]=(0,q.useState)(!1),[w,x]=(0,q.useState)(null),y=async a=>{w&&(await i({invoiceId:w.id,amount:Number.parseFloat(w.amount.replace("$","")),method:a,organizationId:w.org}),v(!1))};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Planes y Facturación"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Gestión de suscripciones y pagos (Simulador Local)"})]}),(0,b.jsxs)(d.Button,{className:"bg-orange-600 hover:bg-orange-700",children:[(0,b.jsx)(m.Download,{className:"w-4 h-4 mr-2"}),"Exportar Reporte"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,b.jsx)(c.Card,{className:"bg-gradient-to-br from-green-600 to-green-700",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-green-100 text-sm",children:"MRR"}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-white",children:["$",r.reduce((a,b)=>a+b.amount,0).toLocaleString()]})]}),(0,b.jsx)(j,{className:"w-10 h-10 text-green-200"})]})})}),(0,b.jsx)(c.Card,{className:"bg-gradient-to-br from-blue-600 to-blue-700",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-blue-100 text-sm",children:"ARR"}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-white",children:["$",r.reduce((a,b)=>a+12*b.amount,0).toLocaleString()]})]}),(0,b.jsx)(k.TrendingUp,{className:"w-10 h-10 text-blue-200"})]})})}),(0,b.jsx)(c.Card,{className:"bg-gradient-to-br from-purple-600 to-purple-700",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-purple-100 text-sm",children:"Crecimiento"}),(0,b.jsxs)("p",{className:"text-3xl font-bold text-white",children:["+",(r.length>0?(r.reduce((a,b)=>a+b.amount,0)/r[0].amount-1)*100:0).toFixed(2),"%"]})]}),(0,b.jsx)(l.Calendar,{className:"w-10 h-10 text-purple-200"})]})})}),(0,b.jsx)(c.Card,{className:"bg-gradient-to-br from-orange-600 to-orange-700",children:(0,b.jsx)(c.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-orange-100 text-sm",children:"Pendientes"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-white",children:B.filter(a=>"pending"===a.status).length})]}),(0,b.jsx)(p.Clock,{className:"w-10 h-10 text-orange-200"})]})})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)(c.Card,{className:"border-yellow-500/30",children:[(0,b.jsxs)(c.CardHeader,{className:"pb-3",children:[(0,b.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.CreditCard,{className:"w-5 h-5 text-yellow-500"}),"Enterprise"]}),(0,b.jsx)(c.CardDescription,{children:"$499/mes por empresa"})]}),(0,b.jsxs)(c.CardContent,{children:[(0,b.jsx)("p",{className:"text-4xl font-bold text-yellow-500",children:a.filter(a=>"enterprise"===a.plan).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"empresas activas"}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-yellow-500/10 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm font-medium",children:["Revenue: $",(499*a.filter(a=>"enterprise"===a.plan).length).toLocaleString(),"/mes"]})})]})]}),(0,b.jsxs)(c.Card,{className:"border-blue-500/30",children:[(0,b.jsxs)(c.CardHeader,{className:"pb-3",children:[(0,b.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.CreditCard,{className:"w-5 h-5 text-blue-500"}),"Pro"]}),(0,b.jsx)(c.CardDescription,{children:"$99/mes por empresa"})]}),(0,b.jsxs)(c.CardContent,{children:[(0,b.jsx)("p",{className:"text-4xl font-bold text-blue-500",children:a.filter(a=>"pro"===a.plan).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"empresas activas"}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-blue-500/10 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm font-medium",children:["Revenue: $",(99*a.filter(a=>"pro"===a.plan).length).toLocaleString(),"/mes"]})})]})]}),(0,b.jsxs)(c.Card,{className:"border-gray-500/30",children:[(0,b.jsxs)(c.CardHeader,{className:"pb-3",children:[(0,b.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.CreditCard,{className:"w-5 h-5 text-gray-500"}),"Free"]}),(0,b.jsx)(c.CardDescription,{children:"Plan gratuito limitado"})]}),(0,b.jsxs)(c.CardContent,{children:[(0,b.jsx)("p",{className:"text-4xl font-bold text-gray-400",children:a.filter(a=>"free"===a.plan).length}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"empresas activas"}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-gray-500/10 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm font-medium",children:["Potencial conversión: $",99*a.filter(a=>"free"===a.plan).length,"/mes"]})})]})]})]}),(0,b.jsxs)(c.Card,{children:[(0,b.jsxs)(c.CardHeader,{children:[(0,b.jsxs)(c.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(n.FileText,{className:"w-5 h-5"}),"Facturas Recientes"]}),(0,b.jsx)(c.CardDescription,{children:"Historial de facturación del mes actual"})]}),(0,b.jsx)(c.CardContent,{children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableHead,{children:"Factura"}),(0,b.jsx)(f.TableHead,{children:"Empresa"}),(0,b.jsx)(f.TableHead,{children:"Plan"}),(0,b.jsx)(f.TableHead,{children:"Monto"}),(0,b.jsx)(f.TableHead,{children:"Fecha"}),(0,b.jsx)(f.TableHead,{children:"Estado"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Acciones"})]})}),(0,b.jsx)(f.TableBody,{children:B.map(a=>(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableCell,{className:"font-mono text-sm",children:a.id}),(0,b.jsx)(f.TableCell,{children:a.org}),(0,b.jsx)(f.TableCell,{children:(0,b.jsx)(e.Badge,{className:"Enterprise"===a.plan?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400",children:a.plan})}),(0,b.jsx)(f.TableCell,{className:"font-semibold",children:a.amount}),(0,b.jsx)(f.TableCell,{children:a.date}),(0,b.jsx)(f.TableCell,{children:"paid"===a.status?(0,b.jsxs)(e.Badge,{className:"bg-green-500/20 text-green-400",children:[(0,b.jsx)(o.CheckCircle,{className:"w-3 h-3 mr-1"}),"Pagado"]}):(0,b.jsxs)(e.Badge,{className:"bg-yellow-500/20 text-yellow-400",children:[(0,b.jsx)(p.Clock,{className:"w-3 h-3 mr-1"}),"Pendiente"]})}),(0,b.jsxs)(f.TableCell,{className:"text-right",children:["pending"===a.status&&(0,b.jsx)(d.Button,{variant:"outline",size:"sm",className:"text-blue-400 border-blue-400/50 hover:bg-blue-500/10 bg-transparent",onClick:()=>{x(a),v(!0)},children:"Pagar"}),(0,b.jsx)(d.Button,{variant:"ghost",size:"sm",className:"ml-2",children:(0,b.jsx)(m.Download,{className:"w-4 h-4"})})]})]},a.id))})]})})]}),(0,b.jsx)(A,{isOpen:s,onClose:()=>v(!1),onProcessPayment:y,invoice:w})]})}a.s(["default",()=>C],28239)}];

//# sourceMappingURL=app_super-admin_billing_page_tsx_a6f8ba20._.js.map