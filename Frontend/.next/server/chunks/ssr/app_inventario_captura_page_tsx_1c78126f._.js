module.exports=[65952,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(96313),e=a.i(21650),f=a.i(40695),g=a.i(3130),h=a.i(54161),i=a.i(5522),j=a.i(17171),k=a.i(87682),l=a.i(97895),m=a.i(16201),n=a.i(62722),o=a.i(8838);let p=null,q=a=>{try{p||(p=new(window.AudioContext||window.webkitAudioContext));let b=p.createOscillator(),c=p.createGain();b.connect(c),c.connect(p.destination),"success"===a?(b.frequency.setValueAtTime(880,p.currentTime),b.frequency.setValueAtTime(1100,p.currentTime+.1),c.gain.setValueAtTime(.3,p.currentTime),c.gain.exponentialRampToValueAtTime(.01,p.currentTime+.2),b.start(p.currentTime),b.stop(p.currentTime+.2)):(b.frequency.setValueAtTime(200,p.currentTime),b.type="square",c.gain.setValueAtTime(.3,p.currentTime),c.gain.exponentialRampToValueAtTime(.01,p.currentTime+.4),b.start(p.currentTime),b.stop(p.currentTime+.4))}catch{}};function r({label:a,value:d,expectedValue:e,onScan:f,onValidation:g,placeholder:h="Escanear código...",disabled:k=!1,autoFocus:p=!1,className:r,showStatus:s=!0,readOnly:t=!0}){let[u,v]=(0,c.useState)("idle"),[w,x]=(0,c.useState)(""),y=(0,c.useRef)(null),z=(0,c.useRef)(null),A=(0,c.useCallback)(a=>{a.trim()&&(v("scanning"),setTimeout(()=>{if(e){let b=a.toUpperCase()===e.toUpperCase();v(b?"success":"error"),q(b?"success":"error"),g?.(b),b&&f(a)}else v("success"),q("success"),f(a),g?.(!0);z.current=setTimeout(()=>{v("idle")},1500)},200))},[e,f,g]);return(0,c.useEffect)(()=>{p&&y.current&&y.current.focus()},[p]),(0,c.useEffect)(()=>()=>{z.current&&clearTimeout(z.current)},[]),(0,b.jsxs)("div",{className:(0,l.cn)("space-y-2",r),children:[(0,b.jsxs)(j.Label,{className:"text-base font-semibold text-foreground flex items-center gap-2",children:[a,e&&(0,b.jsxs)("span",{className:"text-xs font-normal text-muted-foreground",children:["(Esperado: ",e,")"]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Input,{ref:y,value:d||w,onChange:a=>{x(a.target.value)},onKeyDown:a=>{"Enter"===a.key&&w&&(a.preventDefault(),A(w),x(""))},placeholder:h,disabled:k,readOnly:!1,className:(0,l.cn)("h-14 text-lg font-mono pr-12 transition-all duration-200",(()=>{switch(u){case"success":return"border-green-500 bg-green-500/10 ring-2 ring-green-500/50 animate-pulse";case"error":return"border-red-500 bg-red-500/10 ring-2 ring-red-500/50 animate-shake";case"scanning":return"border-blue-500 bg-blue-500/10 ring-2 ring-blue-500/50";default:return"border-border"}})(),t&&"cursor-default caret-transparent selection:bg-transparent"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1}),s&&(0,b.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(()=>{switch(u){case"success":return(0,b.jsx)(m.CheckCircle,{className:"h-5 w-5 text-green-500"});case"error":return(0,b.jsx)(n.XCircle,{className:"h-5 w-5 text-red-500"});case"scanning":return(0,b.jsx)(o.ScanLine,{className:"h-5 w-5 text-blue-500 animate-pulse"});default:return(0,b.jsx)(o.ScanLine,{className:"h-5 w-5 text-muted-foreground"})}})()})]}),"error"===u&&(0,b.jsx)("p",{className:"text-sm text-red-500 font-medium animate-in fade-in",children:"Código no coincide. Escanee nuevamente."})]})}var s=a.i(83497),t=a.i(24987),u=a.i(14548),v=a.i(92e3),w=a.i(70106);let x=(0,w.default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),y=(0,w.default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var z=a.i(50522);let A=(0,w.default)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),B=[{id:"1",codigo:"PROD-001",descripcion:"Producto A Premium - Caja x 24 unidades",ubicacion:"A-01-01",stockSistema:150,conteoFisico:0,diferencia:0,estado:"Pendiente"},{id:"2",codigo:"PROD-002",descripcion:"Producto B Estándar - Pack x 12",ubicacion:"A-01-02",stockSistema:280,conteoFisico:0,diferencia:0,estado:"Pendiente"},{id:"3",codigo:"PROD-003",descripcion:"Producto C Básico - Unidad",ubicacion:"A-02-01",stockSistema:95,conteoFisico:0,diferencia:0,estado:"Pendiente"}];function C(){let[a,l]=(0,c.useState)(B),[n,p]=(0,c.useState)("INV-2025-001"),[q,w]=(0,c.useState)("ubicacion"),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(null),M=(0,c.useRef)(null),N=a.filter(a=>"Pendiente"===a.estado).length,O=a.filter(a=>"Contado"===a.estado).length,P=a.filter(a=>"Verificado"===a.estado).length;(0,c.useEffect)(()=>{"cantidad"===q&&M.current&&M.current.focus()},[q]);let Q=()=>{w("ubicacion"),D(""),F(""),H(""),J(null),L(null)},R=(a,c)=>{let d=["ubicacion","producto","cantidad"],e=d.indexOf(q),f=d.indexOf(a);return f<e?(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center",children:(0,b.jsx)(m.CheckCircle,{className:"w-6 h-6 text-white"})}):f===e?(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center animate-pulse",children:(0,b.jsx)("span",{className:"text-white font-bold text-lg",children:c+1})}):(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-muted flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-muted-foreground font-bold text-lg",children:c+1})})};return(0,b.jsx)(d.MainLayout,{children:(0,b.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,b.jsx)(e.PageHeader,{title:"Captura de Inventario",description:"Conteo físico mediante escaneo industrial (PDA)",icon:(0,b.jsx)(o.ScanLine,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[(0,b.jsx)(g.Card,{className:"bg-amber-500 border-0",children:(0,b.jsx)(g.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-amber-100 text-xs sm:text-sm",children:"Pendientes"}),(0,b.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-white",children:N})]}),(0,b.jsx)(v.AlertCircle,{className:"h-8 w-8 sm:h-10 sm:w-10 text-amber-200"})]})})}),(0,b.jsx)(g.Card,{className:"bg-blue-600 border-0",children:(0,b.jsx)(g.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-blue-100 text-xs sm:text-sm",children:"Contados"}),(0,b.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-white",children:O})]}),(0,b.jsx)(s.Package,{className:"h-8 w-8 sm:h-10 sm:w-10 text-blue-200"})]})})}),(0,b.jsx)(g.Card,{className:"bg-green-600 border-0",children:(0,b.jsx)(g.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-green-100 text-xs sm:text-sm",children:"Verificados"}),(0,b.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-white",children:P})]}),(0,b.jsx)(m.CheckCircle,{className:"h-8 w-8 sm:h-10 sm:w-10 text-green-200"})]})})}),(0,b.jsx)(g.Card,{className:"bg-purple-600 border-0",children:(0,b.jsx)(g.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-purple-100 text-xs sm:text-sm",children:"Progreso"}),(0,b.jsxs)("p",{className:"text-3xl sm:text-4xl font-bold text-white",children:[Math.round((O+P)/a.length*100),"%"]})]}),(0,b.jsx)(x,{className:"h-8 w-8 sm:h-10 sm:w-10 text-purple-200"})]})})})]}),(0,b.jsxs)(g.Card,{className:"bg-card border-border",children:[(0,b.jsx)(g.CardHeader,{className:"border-b border-border",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(g.CardTitle,{className:"text-xl sm:text-2xl flex items-center gap-2",children:[(0,b.jsx)(o.ScanLine,{className:"h-6 w-6 text-orange-500"}),"Panel de Escaneo"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(k.Select,{value:n,onValueChange:p,children:[(0,b.jsx)(k.SelectTrigger,{className:"w-[180px] sm:w-[220px]",children:(0,b.jsx)(k.SelectValue,{})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"INV-2025-001",children:"INV-2025-001 - General"}),(0,b.jsx)(k.SelectItem,{value:"INV-2025-002",children:"INV-2025-002 - Parcial"})]})]}),(0,b.jsx)(f.Button,{variant:"outline",size:"icon",onClick:Q,children:(0,b.jsx)(y,{className:"h-4 w-4"})})]})]})}),(0,b.jsxs)(g.CardContent,{className:"p-4 sm:p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 sm:gap-4 mb-6 sm:mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[R("ubicacion",0),(0,b.jsx)("span",{className:`text-sm font-medium ${"ubicacion"===q?"text-orange-500":"text-muted-foreground"}`,children:"Ubicación"})]}),(0,b.jsx)(z.ChevronRight,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[R("producto",1),(0,b.jsx)("span",{className:`text-sm font-medium ${"producto"===q?"text-orange-500":"text-muted-foreground"}`,children:"Producto"})]}),(0,b.jsx)(z.ChevronRight,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[R("cantidad",2),(0,b.jsx)("span",{className:`text-sm font-medium ${"cantidad"===q?"text-orange-500":"text-muted-foreground"}`,children:"Cantidad"})]})]}),I&&(0,b.jsx)(g.Card,{className:"bg-muted/30 border-orange-500/30 mb-6",children:(0,b.jsx)(g.CardContent,{className:"p-4 sm:p-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(h.Badge,{className:"bg-orange-500/20 text-orange-400 border-orange-500/30 mb-2",children:"Item Actual"}),(0,b.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-foreground mb-1",children:I.codigo}),(0,b.jsx)("p",{className:"text-base sm:text-lg text-muted-foreground",children:I.descripcion}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-sm",children:[(0,b.jsx)(t.MapPin,{className:"h-4 w-4 text-orange-500"}),(0,b.jsx)("span",{className:"font-mono text-foreground",children:I.ubicacion})]})]}),(0,b.jsx)("div",{className:"flex flex-row sm:flex-col gap-4 sm:gap-2 text-center sm:text-right",children:(0,b.jsxs)("div",{className:"bg-background p-3 sm:p-4 rounded-lg flex-1 sm:flex-none",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Stock Sistema"}),(0,b.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-foreground",children:I.stockSistema})]})})]})})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(r,{label:"1. Escanear Ubicación",value:C,onScan:b=>{D(b);let c=a.find(a=>a.ubicacion.toUpperCase()===b.toUpperCase()&&"Pendiente"===a.estado);c&&(J(c),w("producto"),L({step:"ubicacion",valid:!0}))},placeholder:"Escanee el código de ubicación (ej: A-01-01)",disabled:"ubicacion"!==q,autoFocus:"ubicacion"===q,readOnly:!0}),(0,b.jsx)(r,{label:"2. Escanear Producto",value:E,expectedValue:I?.codigo,onScan:a=>{F(a),I&&a.toUpperCase()===I.codigo.toUpperCase()&&(w("cantidad"),L({step:"producto",valid:!0}))},onValidation:a=>{L({step:"producto",valid:a}),a||F("")},placeholder:"Escanee el código del producto",disabled:"producto"!==q,autoFocus:"producto"===q,readOnly:!0}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(j.Label,{className:"text-base font-semibold text-foreground flex items-center gap-2",children:[(0,b.jsx)(A,{className:"h-4 w-4"}),"3. Ingresar Cantidad Contada"]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(i.Input,{ref:M,type:"number",value:G,onChange:a=>H(a.target.value),placeholder:"0",disabled:"cantidad"!==q,className:"h-14 text-2xl sm:text-3xl font-mono text-center flex-1",min:"0"}),(0,b.jsxs)(f.Button,{onClick:()=>{if(!I||!G)return;let b=Number.parseInt(G);l(a.map(a=>a.id===I.id?{...a,conteoFisico:b,diferencia:b-a.stockSistema,estado:"Contado"}:a)),Q()},disabled:"cantidad"!==q||!G,className:"h-14 px-6 sm:px-8 bg-green-600 hover:bg-green-700 text-lg font-semibold",children:[(0,b.jsx)(u.Save,{className:"h-5 w-5 mr-2"}),"Guardar"]})]})]})]})]})]}),(0,b.jsxs)(g.Card,{className:"bg-card border-border",children:[(0,b.jsx)(g.CardHeader,{children:(0,b.jsx)(g.CardTitle,{className:"text-lg sm:text-xl",children:"Items Pendientes de Conteo"})}),(0,b.jsx)(g.CardContent,{className:"p-0",children:(0,b.jsxs)("div",{className:"divide-y divide-border",children:[a.filter(a=>"Pendiente"===a.estado).map(a=>(0,b.jsxs)("button",{onClick:()=>{Q(),D(a.ubicacion),J(a),w("producto")},className:"w-full p-4 sm:p-5 flex items-center justify-between hover:bg-muted/50 transition-colors text-left",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-lg bg-amber-500/20 flex items-center justify-center",children:(0,b.jsx)(s.Package,{className:"h-6 w-6 sm:h-7 sm:w-7 text-amber-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-bold text-foreground text-base sm:text-lg",children:a.codigo}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-1",children:a.descripcion}),(0,b.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[(0,b.jsx)(t.MapPin,{className:"h-3 w-3"}),(0,b.jsx)("span",{className:"font-mono",children:a.ubicacion})]})]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Stock"}),(0,b.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-foreground",children:a.stockSistema})]})]},a.id)),0===a.filter(a=>"Pendiente"===a.estado).length&&(0,b.jsxs)("div",{className:"p-8 text-center",children:[(0,b.jsx)(m.CheckCircle,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),(0,b.jsx)("p",{className:"text-lg font-medium text-foreground",children:"Todos los items han sido contados"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No hay items pendientes de conteo"})]})]})})]})]})})}a.s(["default",()=>C],65952)}];

//# sourceMappingURL=app_inventario_captura_page_tsx_1c78126f._.js.map