(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53800,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(68834),i=e.i(79473);let l=(0,s.create)()((0,i.persist)((e,t)=>({shapes:[],selectedShapeId:null,zoom:1,stagePosition:{x:400,y:300},gridSize:20,snapToGrid:!0,pixelsPerMeter:50,addShape:t=>e(e=>{let a=e.pixelsToMeters(t.width),s=e.pixelsToMeters(t.height),i=e.pixelsToMeters(t.x),l=e.pixelsToMeters(t.y);return{shapes:[...e.shapes,{...t,realWorldWidth:a,realWorldHeight:s,realWorldX:i,realWorldY:l}],selectedShapeId:t.id}}),updateShape:(t,a)=>e(e=>{let s=e.shapes.find(e=>e.id===t);if(!s)return e;let i={...a};return(void 0!==a.x||void 0!==a.y)&&(i.realWorldX=e.pixelsToMeters(a.x??s.x),i.realWorldY=e.pixelsToMeters(a.y??s.y)),void 0!==a.width&&(i.realWorldWidth=e.pixelsToMeters(a.width)),void 0!==a.height&&(i.realWorldHeight=e.pixelsToMeters(a.height)),{shapes:e.shapes.map(e=>e.id===t?{...e,...i}:e)}}),deleteShape:t=>e(e=>({shapes:e.shapes.filter(e=>e.id!==t),selectedShapeId:e.selectedShapeId===t?null:e.selectedShapeId})),selectShape:t=>e({selectedShapeId:t}),setZoom:t=>e({zoom:Math.max(.1,Math.min(3,t))}),setStagePosition:t=>e({stagePosition:t}),setSnapToGrid:t=>e({snapToGrid:t}),clearLayout:()=>e({shapes:[],selectedShapeId:null}),loadLayout:t=>e({shapes:t,selectedShapeId:null}),pixelsToMeters:e=>Number((e/t().pixelsPerMeter).toFixed(2)),metersToPixels:e=>e*t().pixelsPerMeter,snapToGridCoordinate:(e,t)=>Math.round(e/t)*t}),{name:"warehouse-layout-storage"}));var r=e.i(67881);e.i(74080);var o=e.i(91918),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let i=(0,o.createSlot)(`Primitive.${s}`),l=a.forwardRef((e,a)=>{let{asChild:l,...r}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(l?i:s,{...r,ref:a})});return l.displayName=`Primitive.${s}`,{...e,[s]:l}},{}),c="horizontal",d=["horizontal","vertical"],h=a.forwardRef((e,a)=>{var s;let{decorative:i,orientation:l=c,...r}=e,o=(s=l,d.includes(s))?l:c;return(0,t.jsx)(n.div,{"data-orientation":o,...i?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"},...r,ref:a})});h.displayName="Separator";var x=e.i(47163);function m({className:e,orientation:a="horizontal",decorative:s=!0,...i}){return(0,t.jsx)(h,{"data-slot":"separator",decorative:s,orientation:a,className:(0,x.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...i})}var p=e.i(19036),u=e.i(10708),g=e.i(73264),y=e.i(52044),f=e.i(75254);let v=(0,f.default)("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);var b=e.i(7486),j=e.i(27612),k=e.i(56909),w=e.i(69074);let N=(0,f.default)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),C=(0,f.default)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),T=(0,f.default)("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var z=e.i(67240);let S=[{type:"rack",icon:(0,t.jsx)(g.LayoutGrid,{className:"w-5 h-5"}),label:"Rack",color:"#3b82f6"},{type:"zone",icon:(0,t.jsx)(y.Square,{className:"w-5 h-5"}),label:"Zona",color:"#22c55e"},{type:"obstacle",icon:(0,t.jsx)(b.Building2,{className:"w-5 h-5"}),label:"Obstáculo",color:"#ef4444"},{type:"access-point",icon:(0,t.jsx)(v,{className:"w-5 h-5"}),label:"Acceso",color:"#a855f7"}];function P(){let{addShape:e,snapToGrid:a,setSnapToGrid:s,zoom:i,setZoom:o,clearLayout:n,shapes:c,setStagePosition:d}=l();return(0,t.jsxs)("div",{className:"w-16 lg:w-56 bg-card border-r border-border flex flex-col h-full shrink-0",children:[(0,t.jsxs)("div",{className:"p-2 lg:p-4 border-b border-border",children:[(0,t.jsx)("h3",{className:"text-xs lg:text-sm font-semibold text-foreground hidden lg:block",children:"Herramientas"}),(0,t.jsx)(N,{className:"w-5 h-5 text-muted-foreground lg:hidden mx-auto"})]}),(0,t.jsxs)("div",{className:"p-2 space-y-2 flex-1 overflow-y-auto",children:[S.map(a=>(0,t.jsxs)("button",{onClick:()=>{var t;let s;return t=a.type,s=S.find(e=>e.type===t),void e({id:`${t}-${Date.now()}`,type:t,x:100+200*Math.random(),y:100+200*Math.random(),width:"zone"===t?200:"obstacle"===t?80:120,height:"zone"===t?150:80,rotation:0,name:`${s?.label||t} ${c.filter(e=>e.type===t).length+1}`,color:s?.color||"#3b82f6",levels:"rack"===t?3:void 0,positionsPerLevel:"rack"===t?4:void 0,zoneType:"zone"===t?"storage":void 0,obstacleType:"obstacle"===t?"column":void 0,accessType:"access-point"===t?"loading":void 0})},draggable:!0,onDragStart:e=>{var t;return t=a.type,void(e.dataTransfer.setData("shapeType",t),e.dataTransfer.effectAllowed="copy")},className:"w-full flex items-center gap-2 p-2 lg:p-3 rounded-lg border border-border bg-background hover:bg-accent hover:border-primary transition-colors cursor-grab active:cursor-grabbing",style:{borderLeftColor:a.color,borderLeftWidth:3},children:[(0,t.jsx)("div",{style:{color:a.color},children:a.icon}),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground hidden lg:block",children:a.label})]},a.type)),(0,t.jsx)(m,{className:"my-4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("p",{className:"text-xs text-muted-foreground hidden lg:block",children:["Zoom: ",Math.round(100*i),"%"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(r.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>o(i-.1),children:(0,t.jsx)(T,{className:"w-4 h-4"})}),(0,t.jsx)(r.Button,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>o(i+.1),children:(0,t.jsx)(C,{className:"w-4 h-4"})}),(0,t.jsx)(r.Button,{variant:"outline",size:"icon",className:"h-8 w-8 hidden lg:flex bg-transparent",onClick:()=>{o(1),d({x:0,y:0})},children:(0,t.jsx)(z.RotateCcw,{className:"w-4 h-4"})})]})]}),(0,t.jsx)(m,{className:"my-4"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(u.Label,{htmlFor:"snap-grid",className:"text-xs text-muted-foreground hidden lg:block",children:"Snap a Grid"}),(0,t.jsx)(N,{className:"w-4 h-4 text-muted-foreground lg:hidden"}),(0,t.jsx)(p.Switch,{id:"snap-grid",checked:a,onCheckedChange:s})]})]}),(0,t.jsxs)("div",{className:"p-2 border-t border-border space-y-2",children:[(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",className:"w-full justify-start gap-2 bg-transparent",onClick:()=>{let e=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="warehouse-layout.json",a.click(),URL.revokeObjectURL(t)},children:[(0,t.jsx)(k.Save,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden lg:block",children:"Guardar"})]}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",className:"w-full justify-start gap-2 bg-transparent",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onload=e=>{try{let t=JSON.parse(e.target?.result);l.getState().loadLayout(t)}catch(e){console.error("Error loading layout:",e)}},e.readAsText(t)}},e.click()},children:[(0,t.jsx)(w.Upload,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden lg:block",children:"Cargar"})]}),(0,t.jsxs)(r.Button,{variant:"destructive",size:"sm",className:"w-full justify-start gap-2",onClick:n,children:[(0,t.jsx)(j.Trash2,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden lg:block",children:"Limpiar"})]})]})]})}var L=e.i(23750),M=e.i(62870),R=e.i(37727);let A=(0,f.default)("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]),B=(0,f.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),I=(0,f.default)("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);function D(){let{shapes:e,selectedShapeId:s,updateShape:i,deleteShape:o,selectShape:n,pixelsToMeters:c}=l(),d=e.find(e=>e.id===s),[h,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(0);return d?(0,t.jsxs)("div",{className:"w-72 bg-card border-l border-border flex flex-col h-full shrink-0",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-border flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Propiedades"}),(0,t.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>n(null),children:(0,t.jsx)(R.X,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{htmlFor:"name",className:"text-xs text-muted-foreground",children:"Nombre/Código"}),(0,t.jsx)(L.Input,{id:"name",value:d.name,onChange:e=>i(d.id,{name:e.target.value}),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{className:"text-xs text-muted-foreground",children:"Tipo"}),(0,t.jsx)("p",{className:"text-sm font-medium capitalize mt-1",children:"rack"===d.type?"Rack/Estantería":"zone"===d.type?"Zona de Suelo":"obstacle"===d.type?"Obstáculo":"Punto de Acceso"})]})]}),(0,t.jsx)(m,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(I,{className:"w-4 h-4 text-primary"}),(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Dimensiones Mundo Real"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 p-3 bg-primary/10 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase",children:"Ancho"}),(0,t.jsxs)("p",{className:"text-lg font-bold text-primary",children:[d.realWorldWidth?.toFixed(2)||"0"," m"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground uppercase",children:"Alto"}),(0,t.jsxs)("p",{className:"text-lg font-bold text-primary",children:[d.realWorldHeight?.toFixed(2)||"0"," m"]})]})]}),(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground italic",children:"Escala: 50px = 1 metro (para cálculos de capacidad)"})]}),(0,t.jsx)(m,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Dimensiones Canvas (píxeles)"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{htmlFor:"width",className:"text-xs text-muted-foreground",children:"Ancho"}),(0,t.jsx)(L.Input,{id:"width",type:"number",value:d.width,onChange:e=>i(d.id,{width:Number(e.target.value)}),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{htmlFor:"height",className:"text-xs text-muted-foreground",children:"Alto"}),(0,t.jsx)(L.Input,{id:"height",type:"number",value:d.height,onChange:e=>i(d.id,{height:Number(e.target.value)}),className:"mt-1"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{htmlFor:"x",className:"text-xs text-muted-foreground",children:"Posición X"}),(0,t.jsx)(L.Input,{id:"x",type:"number",value:Math.round(d.x),onChange:e=>i(d.id,{x:Number(e.target.value)}),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{htmlFor:"y",className:"text-xs text-muted-foreground",children:"Posición Y"}),(0,t.jsx)(L.Input,{id:"y",type:"number",value:Math.round(d.y),onChange:e=>i(d.id,{y:Number(e.target.value)}),className:"mt-1"})]})]})]}),(0,t.jsx)(m,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{htmlFor:"color",className:"text-xs text-muted-foreground",children:"Color"}),(0,t.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,t.jsx)(L.Input,{id:"color",type:"color",value:d.color,onChange:e=>i(d.id,{color:e.target.value}),className:"w-12 h-9 p-1"}),(0,t.jsx)(L.Input,{value:d.color,onChange:e=>i(d.id,{color:e.target.value}),className:"flex-1"})]})]}),"rack"===d.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Config. WMS"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{htmlFor:"levels",className:"text-xs text-muted-foreground",children:"Niveles"}),(0,t.jsx)(L.Input,{id:"levels",type:"number",min:1,max:10,value:d.levels||1,onChange:e=>i(d.id,{levels:Number(e.target.value)}),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{htmlFor:"positions",className:"text-xs text-muted-foreground",children:"Posiciones/Nivel"}),(0,t.jsx)(L.Input,{id:"positions",type:"number",min:1,max:20,value:d.positionsPerLevel||1,onChange:e=>i(d.id,{positionsPerLevel:Number(e.target.value)}),className:"mt-1"})]})]}),(0,t.jsxs)("div",{className:"p-3 bg-gradient-to-br from-primary/20 to-primary/5 rounded-lg border border-primary/20",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Total de ubicaciones:"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-primary mb-2",children:(d.levels||1)*(d.positionsPerLevel||1)}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,t.jsxs)("p",{children:["Área del rack:"," ",(0,t.jsxs)("span",{className:"font-semibold",children:[(d.realWorldWidth*d.realWorldHeight).toFixed(2)," m²"]})]}),(0,t.jsxs)("p",{children:["Capacidad estimada:"," ",(0,t.jsxs)("span",{className:"font-semibold",children:[Math.floor(d.realWorldWidth*d.realWorldHeight*2)," pallets"]})]})]})]}),(0,t.jsx)(r.Button,{className:"w-full",onClick:()=>{if("rack"!==d.type)return;x(!0);let e=(d.levels||1)*(d.positionsPerLevel||1),t=0,a=setInterval(()=>{g(++t),t>=e&&(clearInterval(a),x(!1),setTimeout(()=>g(0),3e3))},100)},disabled:h,children:h?(0,t.jsxs)(t.Fragment,{children:["Generando... ",p]}):p>0?(0,t.jsxs)(t.Fragment,{children:["Generadas ",p," ubicaciones"]}):(0,t.jsx)(t.Fragment,{children:"Generar Ubicaciones en BD"})})]})]}),"zone"===d.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Tipo de Zona"}),(0,t.jsxs)(M.Select,{value:d.zoneType||"storage",onValueChange:e=>i(d.id,{zoneType:e}),children:[(0,t.jsx)(M.SelectTrigger,{children:(0,t.jsx)(M.SelectValue,{})}),(0,t.jsxs)(M.SelectContent,{children:[(0,t.jsx)(M.SelectItem,{value:"reception",children:"Recepción"}),(0,t.jsx)(M.SelectItem,{value:"shipping",children:"Despacho"}),(0,t.jsx)(M.SelectItem,{value:"storage",children:"Almacenamiento"}),(0,t.jsx)(M.SelectItem,{value:"buffer",children:"Pulmón"})]})]})]})]}),"obstacle"===d.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Tipo de Obstáculo"}),(0,t.jsxs)(M.Select,{value:d.obstacleType||"column",onValueChange:e=>i(d.id,{obstacleType:e}),children:[(0,t.jsx)(M.SelectTrigger,{children:(0,t.jsx)(M.SelectValue,{})}),(0,t.jsxs)(M.SelectContent,{children:[(0,t.jsx)(M.SelectItem,{value:"column",children:"Columna"}),(0,t.jsx)(M.SelectItem,{value:"office",children:"Oficina"}),(0,t.jsx)(M.SelectItem,{value:"wall",children:"Pared"})]})]})]})]}),"access-point"===d.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Tipo de Acceso"}),(0,t.jsxs)(M.Select,{value:d.accessType||"loading",onValueChange:e=>i(d.id,{accessType:e}),children:[(0,t.jsx)(M.SelectTrigger,{children:(0,t.jsx)(M.SelectValue,{})}),(0,t.jsxs)(M.SelectContent,{children:[(0,t.jsx)(M.SelectItem,{value:"loading",children:"Carga"}),(0,t.jsx)(M.SelectItem,{value:"unloading",children:"Descarga"}),(0,t.jsx)(M.SelectItem,{value:"emergency",children:"Emergencia"})]})]})]})]})]}),(0,t.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",className:"w-full justify-start gap-2 bg-transparent",onClick:()=>{let e={...d,id:`${d.type}-${Date.now()}`,x:d.x+20,y:d.y+20,name:`${d.name} (copia)`};l.getState().addShape(e)},children:[(0,t.jsx)(B,{className:"w-4 h-4"}),"Duplicar"]}),(0,t.jsxs)(r.Button,{variant:"destructive",size:"sm",className:"w-full justify-start gap-2",onClick:()=>o(d.id),children:[(0,t.jsx)(j.Trash2,{className:"w-4 h-4"}),"Eliminar"]})]})]}):(0,t.jsxs)("div",{className:"w-64 bg-card border-l border-border p-4 hidden lg:flex flex-col items-center justify-center text-center h-full",children:[(0,t.jsx)(A,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Selecciona un elemento del lienzo para ver sus propiedades"})]})}function F({width:e,height:s}){let i=(0,a.useRef)(null),[r,o]=(0,a.useState)(!1),[n,c]=(0,a.useState)(null),[d,h]=(0,a.useState)({x:0,y:0}),[x,m]=(0,a.useState)(null),[p,u]=(0,a.useState)(!1),[g,y]=(0,a.useState)({x:0,y:0}),{shapes:f,selectedShapeId:v,zoom:b,stagePosition:j,gridSize:k,snapToGrid:w,selectShape:N,updateShape:C,addShape:T,setZoom:z,setStagePosition:S,snapToGridCoordinate:P}=l(),L=(0,a.useCallback)(()=>{let t=i.current,a=t?.getContext("2d");if(!t||!a)return;a.clearRect(0,0,e,s),a.save(),a.translate(j.x,j.y),a.scale(b,b),a.strokeStyle="#374151",a.lineWidth=.5/b,a.globalAlpha=.3;let l=3*e/b,r=3*s/b,o=-l/2,c=-r/2;for(let e=o;e<=o+l;e+=k)a.beginPath(),a.moveTo(e,c),a.lineTo(e,c+r),a.stroke();for(let e=c;e<=c+r;e+=k)a.beginPath(),a.moveTo(o,e),a.lineTo(o+l,e),a.stroke();a.globalAlpha=1,f.forEach(e=>{let t,s,i=e.id===v,l=(s=(t={rack:{fill:"rgba(59, 130, 246, 0.6)",stroke:"#3b82f6"},zone:{fill:"rgba(34, 197, 94, 0.4)",stroke:"#22c55e"},obstacle:{fill:"rgba(239, 68, 68, 0.5)",stroke:"#ef4444"},"access-point":{fill:"rgba(168, 85, 247, 0.5)",stroke:"#a855f7"}})[e.type]||t.rack,{fill:i?s.fill.replace(/0\.[456]/,"0.8"):s.fill,stroke:i?"#fbbf24":s.stroke,strokeWidth:i?3:2}),r=e.id===n&&x?x.x:e.x,o=e.id===n&&x?x.y:e.y;a.fillStyle=l.fill,a.strokeStyle=l.stroke,a.lineWidth=l.strokeWidth/b,a.beginPath(),a.moveTo(r+4,o),a.lineTo(r+e.width-4,o),a.quadraticCurveTo(r+e.width,o,r+e.width,o+4),a.lineTo(r+e.width,o+e.height-4),a.quadraticCurveTo(r+e.width,o+e.height,r+e.width-4,o+e.height),a.lineTo(r+4,o+e.height),a.quadraticCurveTo(r,o+e.height,r,o+e.height-4),a.lineTo(r,o+4),a.quadraticCurveTo(r,o,r+4,o),a.closePath(),a.fill(),a.stroke(),a.fillStyle="#ffffff",a.font=`bold ${Math.max(10,14/b)}px Inter, system-ui, sans-serif`,a.textAlign="center",a.textBaseline="middle";let c=e.width-10,d=e.name;for(;a.measureText(d).width>c&&d.length>3;)d=d.slice(0,-1);if(d!==e.name&&(d+="..."),a.fillText(d,r+e.width/2,o+e.height/2),a.font=`${Math.max(8,10/b)}px Inter, system-ui, sans-serif`,a.fillStyle="rgba(255, 255, 255, 0.7)",a.fillText({rack:"RACK",zone:"ZONA",obstacle:"OBSTÁCULO","access-point":"ACCESO"}[e.type]||e.type.toUpperCase(),r+e.width/2,o+e.height/2+14/b),i){let t=8/b;a.fillStyle="#fbbf24",[{x:r,y:o},{x:r+e.width,y:o},{x:r,y:o+e.height},{x:r+e.width,y:o+e.height}].forEach(e=>{a.beginPath(),a.rect(e.x-t/2,e.y-t/2,t,t),a.fill()})}}),a.restore()},[f,v,b,j,k,e,s,n,x]);(0,a.useEffect)(()=>{L()},[L]);let M=(0,a.useCallback)((e,t)=>{let a=i.current;if(!a)return{x:0,y:0};let s=a.getBoundingClientRect();return{x:(e-s.left-j.x)/b,y:(t-s.top-j.y)/b}},[b,j]),R=(0,a.useCallback)((e,t)=>{for(let a=f.length-1;a>=0;a--){let s=f[a];if(e>=s.x&&e<=s.x+s.width&&t>=s.y&&t<=s.y+s.height)return s}return null},[f]),A=(0,a.useCallback)(e=>{let{x:t,y:a}=M(e.clientX,e.clientY),s=R(t,a);s?(N(s.id),o(!0),c(s.id),h({x:t-s.x,y:a-s.y}),m({x:s.x,y:s.y})):(N(null),u(!0),y({x:e.clientX-j.x,y:e.clientY-j.y}))},[M,R,N,j]),B=(0,a.useCallback)(e=>{if(r&&n){let{x:t,y:a}=M(e.clientX,e.clientY);m({x:t-d.x,y:a-d.y})}else p&&S({x:e.clientX-g.x,y:e.clientY-g.y})},[r,n,p,M,d,g,S]),I=(0,a.useCallback)(()=>{if(r&&n&&x){let e=x.x,t=x.y;w&&(e=P(e,k),t=P(t,k)),C(n,{x:e,y:t})}o(!1),c(null),m(null),u(!1)},[r,n,x,w,k,P,C]),D=(0,a.useCallback)(e=>{e.preventDefault();let t=i.current;if(!t)return;let a=t.getBoundingClientRect(),s=e.clientX-a.left,l=e.clientY-a.top,r={x:(s-j.x)/b,y:(l-j.y)/b},o=Math.max(.1,Math.min(3,(e.deltaY>0?-1:1)>0?1.1*b:b/1.1));z(o),S({x:s-r.x*o,y:l-r.y*o})},[b,j,z,S]),F=(0,a.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.getData("shapeType");if(!t)return;let{x:a,y:s}=M(e.clientX,e.clientY),i=a-50,l=s-30;w&&(i=P(i,k),l=P(l,k)),T({id:`${t}-${Date.now()}`,type:t,x:i,y:l,width:"zone"===t?200:"obstacle"===t?80:120,height:"zone"===t?150:80,name:`${{rack:"Rack",zone:"Zona",obstacle:"Obstáculo","access-point":"Acceso"}[t]} ${f.length+1}`,color:{rack:"#3b82f6",zone:"#22c55e",obstacle:"#ef4444","access-point":"#a855f7"}[t],rotation:0,levels:"rack"===t?3:void 0,positionsPerLevel:"rack"===t?4:void 0,zoneType:"zone"===t?"storage":void 0,obstacleType:"obstacle"===t?"column":void 0,accessType:"access-point"===t?"loading":void 0})},[M,k,w,P,f.length,T]),E=(0,a.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},[]);return(0,t.jsx)("div",{className:"relative w-full h-full",children:(0,t.jsx)("canvas",{ref:i,width:e,height:s,className:"cursor-crosshair",style:{backgroundColor:"#1e293b"},onMouseDown:A,onMouseMove:B,onMouseUp:I,onMouseLeave:I,onWheel:D,onDrop:F,onDragOver:E})})}var E=e.i(70065),W=e.i(94179),O=e.i(86536),$=e.i(72664),Y=e.i(46897),Z=e.i(78894);function q(){let e=(0,a.useRef)(null),{shapes:s}=l(),i=(0,a.useCallback)(()=>{if(0===s.length)return{minX:0,minY:0,maxX:400,maxY:200};let e=1/0,t=1/0,a=-1/0,i=-1/0;return s.forEach(s=>{e=Math.min(e,s.x),t=Math.min(t,s.y),a=Math.max(a,s.x+s.width),i=Math.max(i,s.y+s.height)}),{minX:e-20,minY:t-20,maxX:a+20,maxY:i+20}},[s]),r=(0,a.useCallback)(()=>{let t=e.current,a=t?.getContext("2d");if(!t||!a)return;let l=i(),r=l.maxX-l.minX,o=l.maxY-l.minY,n=.9*Math.min(t.width/r,t.height/o);a.clearRect(0,0,t.width,t.height),a.fillStyle="#0f172a",a.fillRect(0,0,t.width,t.height),a.save();let c=(t.width-r*n)/2-l.minX*n,d=(t.height-o*n)/2-l.minY*n;a.translate(c,d),a.scale(n,n),s.forEach(e=>{let t;a.fillStyle=(t={rack:"rgba(59, 130, 246, 0.7)",zone:"rgba(34, 197, 94, 0.5)",obstacle:"rgba(239, 68, 68, 0.6)","access-point":"rgba(168, 85, 247, 0.6)"})[e.type]||t.rack,a.strokeStyle=e.color||"#ffffff",a.lineWidth=2/n,a.beginPath(),a.moveTo(e.x+4,e.y),a.lineTo(e.x+e.width-4,e.y),a.quadraticCurveTo(e.x+e.width,e.y,e.x+e.width,e.y+4),a.lineTo(e.x+e.width,e.y+e.height-4),a.quadraticCurveTo(e.x+e.width,e.y+e.height,e.x+e.width-4,e.y+e.height),a.lineTo(e.x+4,e.y+e.height),a.quadraticCurveTo(e.x,e.y+e.height,e.x,e.y+e.height-4),a.lineTo(e.x,e.y+4),a.quadraticCurveTo(e.x,e.y,e.x+4,e.y),a.closePath(),a.fill(),a.stroke(),n>.3&&(a.fillStyle="#ffffff",a.font=`bold ${Math.max(8,10/n)}px Inter, sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillText(e.name,e.x+e.width/2,e.y+e.height/2))}),a.restore()},[s,i]);(0,a.useEffect)(()=>{r()},[r]);let o={rack:s.filter(e=>"rack"===e.type).length,zone:s.filter(e=>"zone"===e.type).length,obstacle:s.filter(e=>"obstacle"===e.type).length,"access-point":s.filter(e=>"access-point"===e.type).length},n=s.filter(e=>"rack"===e.type).reduce((e,t)=>e+(t.levels||1)*(t.positionsPerLevel||1),0);return(0,t.jsxs)(E.Card,{className:"bg-card border-border",children:[(0,t.jsx)(E.CardHeader,{className:"pb-2",children:(0,t.jsxs)(E.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(O.Eye,{className:"w-4 h-4 text-primary"}),"Vista Previa del Diseño"]})}),(0,t.jsxs)(E.CardContent,{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"relative rounded-lg overflow-hidden border border-border",children:[(0,t.jsx)("canvas",{ref:e,width:400,height:180,className:"w-full"}),0===s.length&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/80",children:(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Arrastra elementos para comenzar"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)($.Box,{className:"w-3 h-3 text-blue-500"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Racks:"}),(0,t.jsx)(W.Badge,{variant:"secondary",className:"h-5 px-1.5",children:o.rack})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)(Y.MapPin,{className:"w-3 h-3 text-green-500"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Zonas:"}),(0,t.jsx)(W.Badge,{variant:"secondary",className:"h-5 px-1.5",children:o.zone})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)(Z.AlertTriangle,{className:"w-3 h-3 text-red-500"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Obstáculos:"}),(0,t.jsx)(W.Badge,{variant:"secondary",className:"h-5 px-1.5",children:o.obstacle})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,t.jsx)(v,{className:"w-3 h-3 text-purple-500"}),(0,t.jsx)("span",{className:"text-muted-foreground",children:"Accesos:"}),(0,t.jsx)(W.Badge,{variant:"secondary",className:"h-5 px-1.5",children:o["access-point"]})]})]}),o.rack>0&&(0,t.jsxs)("div",{className:"bg-primary/10 rounded-lg p-2 text-center",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Total de ubicaciones generables:"}),(0,t.jsx)("span",{className:"text-lg font-bold text-primary ml-2",children:n})]})]})]})}var X=e.i(30374);let G=(0,f.default)("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);var U=e.i(33785),V=e.i(88844);let H=(0,f.default)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]),K=[{id:"small-warehouse",name:"Almacén Pequeño",description:"Ideal para bodegas de 200-500m², con 2 zonas y 6 racks",icon:(0,t.jsx)(V.Package,{className:"w-5 h-5"}),stats:{racks:6,zones:2,positions:72},shapes:[{id:"zone-1",type:"zone",x:20,y:20,width:180,height:100,rotation:0,name:"Recepción",color:"#22c55e",zoneType:"reception"},{id:"zone-2",type:"zone",x:20,y:280,width:180,height:100,rotation:0,name:"Despacho",color:"#22c55e",zoneType:"shipping"},{id:"rack-1",type:"rack",x:240,y:20,width:100,height:60,rotation:0,name:"Rack A1",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"rack-2",type:"rack",x:360,y:20,width:100,height:60,rotation:0,name:"Rack A2",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"rack-3",type:"rack",x:480,y:20,width:100,height:60,rotation:0,name:"Rack A3",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"rack-4",type:"rack",x:240,y:120,width:100,height:60,rotation:0,name:"Rack B1",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"rack-5",type:"rack",x:360,y:120,width:100,height:60,rotation:0,name:"Rack B2",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"rack-6",type:"rack",x:480,y:120,width:100,height:60,rotation:0,name:"Rack B3",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"access-1",type:"access-point",x:20,y:180,width:60,height:60,rotation:0,name:"Entrada",color:"#a855f7",accessType:"loading"}]},{id:"medium-warehouse",name:"Almacén Mediano",description:"Para bodegas de 500-1500m², con múltiples zonas y pasillos",icon:(0,t.jsx)(U.Warehouse,{className:"w-5 h-5"}),stats:{racks:12,zones:4,positions:192},shapes:[{id:"zone-1",type:"zone",x:20,y:20,width:200,height:120,rotation:0,name:"Recepción",color:"#22c55e",zoneType:"reception"},{id:"zone-2",type:"zone",x:20,y:160,width:200,height:80,rotation:0,name:"Buffer",color:"#f59e0b",zoneType:"buffer"},{id:"zone-3",type:"zone",x:20,y:260,width:200,height:120,rotation:0,name:"Despacho",color:"#22c55e",zoneType:"shipping"},{id:"zone-4",type:"zone",x:260,y:20,width:480,height:360,rotation:0,name:"Zona de Almacenaje",color:"#0ea5e9",zoneType:"storage"},{id:"rack-1",type:"rack",x:280,y:40,width:100,height:70,rotation:0,name:"Rack A1",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-2",type:"rack",x:280,y:130,width:100,height:70,rotation:0,name:"Rack A2",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-3",type:"rack",x:280,y:220,width:100,height:70,rotation:0,name:"Rack A3",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-4",type:"rack",x:280,y:310,width:100,height:70,rotation:0,name:"Rack A4",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-5",type:"rack",x:420,y:40,width:100,height:70,rotation:0,name:"Rack B1",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-6",type:"rack",x:420,y:130,width:100,height:70,rotation:0,name:"Rack B2",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-7",type:"rack",x:420,y:220,width:100,height:70,rotation:0,name:"Rack B3",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-8",type:"rack",x:420,y:310,width:100,height:70,rotation:0,name:"Rack B4",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-9",type:"rack",x:560,y:40,width:100,height:70,rotation:0,name:"Rack C1",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-10",type:"rack",x:560,y:130,width:100,height:70,rotation:0,name:"Rack C2",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-11",type:"rack",x:560,y:220,width:100,height:70,rotation:0,name:"Rack C3",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"rack-12",type:"rack",x:560,y:310,width:100,height:70,rotation:0,name:"Rack C4",color:"#3b82f6",levels:4,positionsPerLevel:4},{id:"obs-1",type:"obstacle",x:700,y:100,width:40,height:40,rotation:0,name:"Columna 1",color:"#ef4444",obstacleType:"column"},{id:"obs-2",type:"obstacle",x:700,y:260,width:40,height:40,rotation:0,name:"Columna 2",color:"#ef4444",obstacleType:"column"},{id:"access-1",type:"access-point",x:100,y:400,width:80,height:50,rotation:0,name:"Andén 1",color:"#a855f7",accessType:"loading"},{id:"access-2",type:"access-point",x:700,y:180,width:50,height:60,rotation:0,name:"Emergencia",color:"#dc2626",accessType:"emergency"}]},{id:"retail-store",name:"Tienda Retail",description:"Layout para tienda con área de ventas y bodega trasera",icon:(0,t.jsx)(H,{className:"w-5 h-5"}),stats:{racks:8,zones:3,positions:64},shapes:[{id:"zone-1",type:"zone",x:20,y:20,width:400,height:200,rotation:0,name:"Área de Ventas",color:"#0ea5e9",zoneType:"storage"},{id:"zone-2",type:"zone",x:20,y:240,width:300,height:140,rotation:0,name:"Bodega",color:"#22c55e",zoneType:"storage"},{id:"zone-3",type:"zone",x:340,y:240,width:150,height:140,rotation:0,name:"Recepción",color:"#f59e0b",zoneType:"reception"},{id:"rack-1",type:"rack",x:40,y:40,width:80,height:50,rotation:0,name:"Góndola 1",color:"#3b82f6",levels:2,positionsPerLevel:4},{id:"rack-2",type:"rack",x:140,y:40,width:80,height:50,rotation:0,name:"Góndola 2",color:"#3b82f6",levels:2,positionsPerLevel:4},{id:"rack-3",type:"rack",x:240,y:40,width:80,height:50,rotation:0,name:"Góndola 3",color:"#3b82f6",levels:2,positionsPerLevel:4},{id:"rack-4",type:"rack",x:340,y:40,width:80,height:50,rotation:0,name:"Góndola 4",color:"#3b82f6",levels:2,positionsPerLevel:4},{id:"rack-5",type:"rack",x:40,y:260,width:80,height:50,rotation:0,name:"Estante A",color:"#3b82f6",levels:2,positionsPerLevel:4},{id:"rack-6",type:"rack",x:140,y:260,width:80,height:50,rotation:0,name:"Estante B",color:"#3b82f6",levels:2,positionsPerLevel:4},{id:"rack-7",type:"rack",x:40,y:330,width:80,height:50,rotation:0,name:"Estante C",color:"#3b82f6",levels:2,positionsPerLevel:4},{id:"rack-8",type:"rack",x:140,y:330,width:80,height:50,rotation:0,name:"Estante D",color:"#3b82f6",levels:2,positionsPerLevel:4},{id:"obs-1",type:"obstacle",x:40,y:150,width:160,height:40,rotation:0,name:"Mostrador",color:"#6b7280",obstacleType:"office"},{id:"access-1",type:"access-point",x:440,y:280,width:50,height:80,rotation:0,name:"Puerta Trasera",color:"#a855f7",accessType:"loading"}]},{id:"cold-storage",name:"Cámara Frigorífica",description:"Layout optimizado para almacenamiento en frío con zonas de temperatura",icon:(0,t.jsx)(N,{className:"w-5 h-5"}),stats:{racks:10,zones:3,positions:120},shapes:[{id:"zone-1",type:"zone",x:20,y:20,width:120,height:280,rotation:0,name:"Antecámara",color:"#0ea5e9",zoneType:"buffer"},{id:"zone-2",type:"zone",x:160,y:20,width:280,height:130,rotation:0,name:"Zona Fría (-5°C)",color:"#06b6d4",zoneType:"storage"},{id:"zone-3",type:"zone",x:160,y:170,width:280,height:130,rotation:0,name:"Zona Congelados (-20°C)",color:"#3b82f6",zoneType:"storage"},{id:"rack-1",type:"rack",x:180,y:40,width:80,height:50,rotation:0,name:"Rack F1",color:"#06b6d4",levels:3,positionsPerLevel:4},{id:"rack-2",type:"rack",x:280,y:40,width:80,height:50,rotation:0,name:"Rack F2",color:"#06b6d4",levels:3,positionsPerLevel:4},{id:"rack-3",type:"rack",x:180,y:100,width:80,height:50,rotation:0,name:"Rack F3",color:"#06b6d4",levels:3,positionsPerLevel:4},{id:"rack-4",type:"rack",x:280,y:100,width:80,height:50,rotation:0,name:"Rack F4",color:"#06b6d4",levels:3,positionsPerLevel:4},{id:"rack-5",type:"rack",x:380,y:40,width:80,height:110,rotation:0,name:"Rack F5",color:"#06b6d4",levels:3,positionsPerLevel:4},{id:"rack-6",type:"rack",x:180,y:190,width:80,height:50,rotation:0,name:"Rack C1",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"rack-7",type:"rack",x:280,y:190,width:80,height:50,rotation:0,name:"Rack C2",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"rack-8",type:"rack",x:180,y:250,width:80,height:50,rotation:0,name:"Rack C3",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"rack-9",type:"rack",x:280,y:250,width:80,height:50,rotation:0,name:"Rack C4",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"rack-10",type:"rack",x:380,y:190,width:80,height:110,rotation:0,name:"Rack C5",color:"#3b82f6",levels:3,positionsPerLevel:4},{id:"access-1",type:"access-point",x:40,y:320,width:80,height:50,rotation:0,name:"Andén Refrigerado",color:"#a855f7",accessType:"loading"}]}];function J(){let[e,s]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),{shapes:n,loadLayout:c,clearLayout:d}=l(),h=e=>{d(),c(e.shapes.map(e=>({...e,id:`${e.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))),o(!1),s(null)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(E.Card,{className:"bg-card border-border",children:[(0,t.jsx)(E.CardHeader,{className:"pb-2",children:(0,t.jsxs)(E.CardTitle,{className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(G,{className:"w-4 h-4 text-primary"}),"Plantillas Prediseñadas"]})}),(0,t.jsx)(E.CardContent,{children:(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:K.map(e=>(0,t.jsxs)("button",{onClick:()=>{s(e),n.length>0?o(!0):h(e)},className:"flex flex-col items-start p-3 rounded-lg border border-border bg-background hover:bg-accent hover:border-primary/50 transition-colors text-left group",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2 w-full",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground transition-colors",children:e.icon}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)("h4",{className:"font-medium text-sm truncate",children:e.name})})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(0,t.jsxs)(W.Badge,{variant:"secondary",className:"text-xs",children:[e.stats.racks," racks"]}),(0,t.jsxs)(W.Badge,{variant:"secondary",className:"text-xs",children:[e.stats.zones," zonas"]}),(0,t.jsxs)(W.Badge,{variant:"outline",className:"text-xs",children:[e.stats.positions," pos."]})]})]},e.id))})})]}),(0,t.jsx)(X.Dialog,{open:i,onOpenChange:o,children:(0,t.jsxs)(X.DialogContent,{children:[(0,t.jsxs)(X.DialogHeader,{children:[(0,t.jsxs)(X.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(Z.AlertTriangle,{className:"w-5 h-5 text-yellow-500"}),"Reemplazar diseño actual"]}),(0,t.jsxs)(X.DialogDescription,{children:["Ya tienes ",n.length,' elementos en tu diseño. Al aplicar la plantilla "',e?.name,'" se reemplazará todo el contenido actual.']})]}),(0,t.jsxs)(X.DialogFooter,{className:"gap-2 sm:gap-0",children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>o(!1),children:"Cancelar"}),(0,t.jsx)(r.Button,{variant:"default",onClick:()=>e&&h(e),children:"Aplicar Plantilla"})]})]})})]})}var Q=e.i(77705);function _(){let e=(0,a.useRef)(null),[s,i]=(0,a.useState)({width:800,height:600}),[o,n]=(0,a.useState)(!0),{shapes:c,selectedShapeId:d}=l();return(0,a.useEffect)(()=>{let t=()=>{if(e.current){let t=e.current.getBoundingClientRect();i({width:t.width,height:t.height})}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[o]),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsx)(q,{})}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)(J,{})})]}),(0,t.jsxs)("div",{className:"flex h-[calc(100vh-460px)] min-h-[400px] bg-background rounded-lg border border-border overflow-hidden",children:[(0,t.jsx)(P,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"h-12 bg-card border-b border-border flex items-center justify-between px-4 shrink-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Objetos: ",(0,t.jsx)("span",{className:"text-foreground font-medium",children:c.length})]}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground hidden sm:block",children:["Seleccionado:"," ",(0,t.jsx)("span",{className:"text-foreground font-medium",children:d?c.find(e=>e.id===d)?.name:"Ninguno"})]})]}),(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>n(!o),className:"gap-2",children:[o?(0,t.jsx)(Q.EyeOff,{className:"w-4 h-4"}):(0,t.jsx)(O.Eye,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Panel"})]})]}),(0,t.jsx)("div",{ref:e,className:"flex-1 overflow-hidden",children:(0,t.jsx)(F,{width:s.width,height:s.height})})]}),o&&(0,t.jsx)(D,{})]})]})}e.s(["LayoutEditor",()=>_],53800)},70909,e=>{e.n(e.i(53800))}]);