services:
  # Backend - NestJS con Yarn
  - type: web
    name: wms-backend
    runtime: node
    rootDir: Backend
    buildCommand: yarn install && yarn build
    startCommand: yarn start:prod
    envVars:
      - key: NODE_VERSION
        value: "20"
      - key: DB_HOST
        sync: false
      - key: DB_PORT
        value: "5432"
      - key: DB_USERNAME
        sync: false
      - key: DB_PASSWORD
        sync: false
      - key: DB_DATABASE
        sync: false
      - key: DB_SSL
        value: "true"
      - key: DB_SYNCHRONIZE
        value: "true"

  # Frontend - Next.js con NPM
  - type: web
    name: wms-frontend
    runtime: node
    rootDir: Frontend
    buildCommand: npm install && npm run build
    startCommand: npm start
    envVars:
      - key: NODE_VERSION
        value: "20"
      - key: NEXT_PUBLIC_API_URL
        sync: false
